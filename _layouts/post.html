---
layout: default
---

<section class="hero-gallery">
  {% assign folder = page.image_folder %}
  {% assign images = "" | split: "" %}

  {% for file in site.static_files %}
    {% if file.path contains folder %}
      {% assign images = images | push: file.path %}
    {% endif %}
  {% endfor %}

  {% if images.size > 0 %}
  <div class="slider">
    <button class="nav prev">&#10094;</button>

    <div class="slide-container">
      {% for img in images %}
        <img class="slide {% if forloop.first %}active{% endif %}"
             src="{{ img | relative_url }}"
             loading="lazy"
             decoding="async">
      {% endfor %}
    </div>

    <div class="gallery-info">
      <span class="image-counter"></span>
      <span class="image-resolution"></span>
    </div>

    <button class="nav next">&#10095;</button>
  </div>
  {% endif %}
</section>

<section class="post-content">
  <div class="post-container">

    <header class="post-header">
      <h1 class="post-title">{{ page.title }}</h1>
      <p class="post-date">{{ page.date | date: "%B %d, %Y" }}</p>
    </header>

    <article class="post-body">
      {{ content }}
    </article>

  </div>
</section>

<!-- Lightbox -->
<div class="lightbox" id="lightbox">
  <span class="close">&times;</span>
  <img class="lightbox-img" id="lightbox-img">
</div>

document.addEventListener("DOMContentLoaded", function() {

  const slides = document.querySelectorAll(".slide");
  const next = document.querySelector(".next");
  const prev = document.querySelector(".prev");
  const lightbox = document.getElementById("lightbox");
  const lightboxImg = document.getElementById("lightbox-img");
  const closeBtn = document.querySelector(".close");

  const counterEl = document.querySelector(".image-counter");
  const resolutionEl = document.querySelector(".image-resolution");

  if (slides.length === 0) return;

  let index = 0;

  function updateInfo(i) {
    const img = slides[i];

    counterEl.textContent = `${i + 1} / ${slides.length}`;

    // Ensure resolution loads properly
    if (img.naturalWidth) {
      resolutionEl.textContent =
        `${img.naturalWidth} × ${img.naturalHeight}`;
    } else {
      img.onload = () => {
        resolutionEl.textContent =
          `${img.naturalWidth} × ${img.naturalHeight}`;
      };
    }
  }

  function showSlide(i) {
    slides.forEach(slide => slide.classList.remove("active"));
    slides[i].classList.add("active");
    updateInfo(i);
  }

  updateInfo(index);

  next?.addEventListener("click", () => {
    index = (index + 1) % slides.length;
    showSlide(index);
  });

  prev?.addEventListener("click", () => {
    index = (index - 1 + slides.length) % slides.length;
    showSlide(index);
  });

  slides.forEach(slide => {
    slide.addEventListener("click", () => {
      lightbox.classList.add("active");
      lightboxImg.src = slide.src;
    });
  });

  closeBtn?.addEventListener("click", () => {
    lightbox.classList.remove("active");
  });

  lightbox.addEventListener("click", (e) => {
    if (e.target === lightbox) {
      lightbox.classList.remove("active");
    }
  });

});
