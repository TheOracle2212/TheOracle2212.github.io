---
layout: default
---

<section class="hero-gallery">
  {% assign folder = page.image_folder %}
  {% assign images = "" | split: "" %}

  {% for file in site.static_files %}
    {% if file.path contains folder %}
      {% assign images = images | push: file.path %}
    {% endif %}
  {% endfor %}

  {% if images.size > 0 %}
  <div class="slider">
    <button class="nav prev">&#10094;</button>

    <div class="slide-container">
      {% for img in images %}
        <img class="slide {% if forloop.first %}active{% endif %}"
             src="{{ img | relative_url }}"
             loading="lazy"
             decoding="async">
      {% endfor %}
    </div>

    <button class="nav next">&#10095;</button>
  </div>
  {% endif %}
</section>

<section class="post-content">
  <h1>{{ page.title }}</h1>
  <p class="post-date">{{ page.date | date: "%B %d, %Y" }}</p>
  <div class="post-body">
    {{ content }}
  </div>
</section>

<!-- Lightbox -->
<div class="lightbox" id="lightbox">
  <span class="close">&times;</span>
  <img class="lightbox-img" id="lightbox-img">
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {

  const slides = document.querySelectorAll(".slide");
  const next = document.querySelector(".next");
  const prev = document.querySelector(".prev");
  const lightbox = document.getElementById("lightbox");
  const lightboxImg = document.getElementById("lightbox-img");
  const closeBtn = document.querySelector(".close");

  let index = 0;

  function showSlide(i) {
    slides.forEach(slide => slide.classList.remove("active"));
    slides[i].classList.add("active");
  }

  if (next && prev) {
    next.addEventListener("click", () => {
      index = (index + 1) % slides.length;
      showSlide(index);
    });

    prev.addEventListener("click", () => {
      index = (index - 1 + slides.length) % slides.length;
      showSlide(index);
    });
  }

  slides.forEach(slide => {
    slide.addEventListener("click", () => {
      lightbox.style.display = "flex";
      lightboxImg.src = slide.src;
    });
  });

  closeBtn.addEventListener("click", () => {
    lightbox.style.display = "none";
  });

  lightbox.addEventListener("click", (e) => {
    if (e.target === lightbox) {
      lightbox.style.display = "none";
    }
  });

});
</script>

<script>
let touchStartX = 0;
let touchEndX = 0;

document.addEventListener('touchstart', e => {
  touchStartX = e.changedTouches[0].screenX;
});

document.addEventListener('touchend', e => {
  touchEndX = e.changedTouches[0].screenX;
  handleSwipe();
});

function handleSwipe() {
  const threshold = 50;

  if (touchEndX < touchStartX - threshold) {
    // Swipe left
    const next = document.querySelector(".next-post");
    if (next) window.location.href = next.href;
  }

  if (touchEndX > touchStartX + threshold) {
    // Swipe right
    const prev = document.querySelector(".prev-post");
    if (prev) window.location.href = prev.href;
  }
}
</script>
