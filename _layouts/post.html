---
layout: default
---

<section class="hero-gallery">

  {% assign folder = page.image_folder %}

  <div class="slider">
    <button class="nav prev">&#10094;</button>

    <div class="slide-container">

      {% for img in page.images_data %}
      <div class="slide-wrapper {% if forloop.first %}active{% endif %}">
        <img class="slide"
             src="{{ folder }}{{ img.file | relative_url }}">
      </div>
    </div>

    <button class="nav next">&#10095;</button>

    <div class="counter">
      <span id="current">1</span> /
      <span id="total">{{ page.images_data | size }}</span>
    </div>
  </div>
</section>

<section class="post-content">
  <h1>{{ page.title }}</h1>
  <p class="post-date">{{ page.date | date: "%B %d, %Y" }}</p>
  <div class="post-body">
    {{ content }}
  </div>
</section>

<div class="lightbox" id="lightbox">
  <span class="close">&times;</span>
  <img class="lightbox-img" id="lightbox-img">
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {

  const slides = document.querySelectorAll(".slide-wrapper");
  const next = document.querySelector(".next");
  const prev = document.querySelector(".prev");
  const counterCurrent = document.getElementById("current");
  const total = slides.length;
  const navButtons = document.querySelectorAll(".nav");
  const lightbox = document.getElementById("lightbox");
  const lightboxImg = document.getElementById("lightbox-img");
  const closeBtn = document.querySelector(".close");

  let index = 0;
  let navTimeout;

  function showSlide(i) {
    slides.forEach(slide => slide.classList.remove("active"));
    slides[i].classList.add("active");
    counterCurrent.textContent = i + 1;
  }

  function nextSlide() {
    index = (index + 1) % total;
    showSlide(index);
  }

  function prevSlide() {
    index = (index - 1 + total) % total;
    showSlide(index);
  }

  next.addEventListener("click", nextSlide);
  prev.addEventListener("click", prevSlide);

  document.addEventListener("keydown", (e) => {
    if (e.key === "ArrowRight") nextSlide();
    if (e.key === "ArrowLeft") prevSlide();
  });

  // Swipe Support
  let startX = 0;
  document.querySelector(".slider").addEventListener("touchstart", e => {
    startX = e.touches[0].clientX;
  });

  document.querySelector(".slider").addEventListener("touchend", e => {
    let endX = e.changedTouches[0].clientX;
    if (startX - endX > 50) nextSlide();
    if (endX - startX > 50) prevSlide();
  });

  // Lightbox
  slides.forEach(slide => {
    slide.querySelector("img").addEventListener("click", () => {
      lightbox.style.display = "flex";
      lightboxImg.src = slide.querySelector("img").src;
    });
  });

  closeBtn.addEventListener("click", () => {
    lightbox.style.display = "none";
  });

  lightbox.addEventListener("click", (e) => {
    if (e.target === lightbox) lightbox.style.display = "none";
  });

  // Auto-hide nav
  function showNav() {
    navButtons.forEach(btn => btn.style.opacity = "1");
    clearTimeout(navTimeout);
    navTimeout = setTimeout(() => {
      navButtons.forEach(btn => btn.style.opacity = "0");
    }, 2000);
  }

  document.querySelector(".slider").addEventListener("mousemove", showNav);
  document.querySelector(".slider").addEventListener("touchstart", showNav);

  showNav();

});
</script>
